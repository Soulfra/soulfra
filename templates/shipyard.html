{% extends "base.html" %}

{% block title %}üö¢ Shipyard - Theme Browser{% endblock %}

{% block content %}
<div class="shipyard-header">
    <h1>üö¢ The Shipyard</h1>
    <p class="shipyard-subtitle">
        Browse themes by ship class. From minimal dinghies to complete galleons.
    </p>
    <p class="shipyard-meta">
        <strong>{{ metadata.total_themes }}</strong> themes across <strong>{{ metadata.total_classes }}</strong> ship classes
    </p>
</div>

<!-- Ship Class Legend -->
<div class="ship-class-legend">
    <h2>‚öì Ship Classifications</h2>
    <div class="legend-grid">
        {% for class_name, class_info in ship_classes.items() %}
        <div class="legend-card" id="class-{{ class_name }}">
            <h3>
                {% if class_name == 'dinghy' %}‚õµ{% endif %}
                {% if class_name == 'schooner' %}üö§{% endif %}
                {% if class_name == 'frigate' %}‚öì{% endif %}
                {% if class_name == 'galleon' %}üö¢{% endif %}
                {{ class_info.name }}
            </h3>
            <p>{{ class_info.description }}</p>
            <div class="legend-meta">
                <span class="badge">{{ class_info.lines }}</span>
                <span class="badge">{{ class_info.use_case }}</span>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- Theme Fleet by Class -->
{% for class_name in ['dinghy', 'schooner', 'frigate', 'galleon'] %}
{% set themes = themes_by_class[class_name] %}
{% if themes %}
<section class="theme-fleet">
    <h2>
        {% if class_name == 'dinghy' %}‚õµ Dinghy Class{% endif %}
        {% if class_name == 'schooner' %}üö§ Schooner Class{% endif %}
        {% if class_name == 'frigate' %}‚öì Frigate Class{% endif %}
        {% if class_name == 'galleon' %}üö¢ Galleon Class{% endif %}
        <span class="theme-count">({{ themes|length }} available)</span>
    </h2>

    <div class="theme-grid">
        {% for theme in themes %}
        <div class="theme-card" data-class="{{ class_name }}">
            <div class="theme-header">
                <h3>
                    <span class="theme-emoji">{{ theme.emoji }}</span>
                    {{ theme.name }}
                </h3>
                {% if theme.tier == 'premium' %}
                <span class="tier-badge premium">‚ú® Premium</span>
                {% else %}
                <span class="tier-badge free">Free</span>
                {% endif %}
            </div>

            <div class="theme-colors">
                {% if theme.colors %}
                <div class="color-swatch" style="background: {{ theme.colors.primary }};" title="{{ theme.colors.primary }}"></div>
                <div class="color-swatch" style="background: {{ theme.colors.background }};" title="{{ theme.colors.background }}"></div>
                <div class="color-swatch" style="background: {{ theme.colors.text }};" title="{{ theme.colors.text }}"></div>
                {% endif %}
            </div>

            {% if theme.personality %}
            <p class="theme-personality">{{ theme.personality }}</p>
            {% endif %}

            {% if theme.features %}
            <ul class="theme-features">
                {% for feature in theme.features[:3] %}
                <li>{{ feature }}</li>
                {% endfor %}
            </ul>
            {% endif %}

            {% if theme.lines %}
            <p class="theme-lines">{{ theme.lines }} lines of CSS</p>
            {% endif %}

            <div class="theme-actions">
                <a href="/?brand={{ theme.slug }}" class="btn btn-primary">
                    üöÄ Launch
                </a>
                <a href="/themes/{{ theme.slug }}.css" class="btn btn-secondary" target="_blank">
                    üîç Inspect Hull
                </a>
            </div>
        </div>
        {% endfor %}
    </div>
</section>
{% endif %}
{% endfor %}

<style>
/* Shipyard Styles */
.shipyard-header {
    text-align: center;
    margin: 3em 0;
}

.shipyard-subtitle {
    font-size: 1.2em;
    color: #666;
    margin: 1em 0;
}

.shipyard-meta {
    color: #999;
}

.ship-class-legend {
    margin: 3em 0;
}

.legend-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5em;
    margin: 2em 0;
}

.legend-card {
    background: #f9f9f9;
    border: 2px solid #eee;
    border-radius: 8px;
    padding: 1.5em;
}

.legend-card h3 {
    margin-top: 0;
    font-size: 1.25em;
}

.legend-meta {
    margin-top: 1em;
    display: flex;
    gap: 0.5em;
    flex-wrap: wrap;
}

.theme-fleet {
    margin: 4em 0;
}

.theme-count {
    color: #999;
    font-weight: normal;
    font-size: 0.8em;
}

.theme-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 2em;
    margin: 2em 0;
}

.theme-card {
    background: white;
    border: 2px solid #eee;
    border-radius: 8px;
    padding: 1.5em;
    transition: all 200ms ease;
}

.theme-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 16px rgba(0,0,0,0.1);
    border-color: #ddd;
}

.theme-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 1em;
}

.theme-header h3 {
    margin: 0;
    font-size: 1.1em;
}

.theme-emoji {
    font-size: 1.5em;
    margin-right: 0.25em;
}

.tier-badge {
    padding: 0.25em 0.75em;
    border-radius: 4px;
    font-size: 0.75em;
    font-weight: 600;
}

.tier-badge.free {
    background: #e8f5e9;
    color: #2e7d32;
}

.tier-badge.premium {
    background: #fff3e0;
    color: #e65100;
}

.theme-colors {
    display: flex;
    gap: 0.5em;
    margin: 1em 0;
}

.color-swatch {
    width: 50px;
    height: 50px;
    border-radius: 6px;
    border: 2px solid #eee;
}

.theme-personality {
    font-style: italic;
    color: #666;
    margin: 1em 0;
}

.theme-features {
    font-size: 0.9em;
    color: #555;
    padding-left: 1.5em;
    margin: 1em 0;
}

.theme-lines {
    font-size: 0.85em;
    color: #999;
    margin: 1em 0;
}

.theme-actions {
    display: flex;
    gap: 0.75em;
    margin-top: 1.5em;
}

.btn {
    flex: 1;
    padding: 0.75em 1em;
    border-radius: 6px;
    text-align: center;
    text-decoration: none;
    font-weight: 600;
    transition: all 200ms ease;
}

.btn-primary {
    background: #0066cc;
    color: white;
}

.btn-primary:hover {
    background: #0052a3;
    transform: translateY(-1px);
}

.btn-secondary {
    background: #f5f5f5;
    color: #333;
    border: 1px solid #ddd;
}

.btn-secondary:hover {
    background: #eee;
}

.badge {
    display: inline-block;
    padding: 0.25em 0.75em;
    border-radius: 4px;
    font-size: 0.85em;
    background: #eee;
    color: #666;
}
</style>

{% endblock %}
