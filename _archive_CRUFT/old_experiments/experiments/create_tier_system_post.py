#!/usr/bin/env python3
"""
Create Tier System Newsletter Post

Adds a post about the completed tier system to the database.
This post showcases our pure stdlib GIF/BMP encoders and brand logos.
"""

import sys
from datetime import datetime
from database import add_post

# Markdown content for the post
POST_CONTENT = '''# Tier System Complete: Binary ‚Üí Images (3,620 Lines Pure Stdlib)

We've eliminated Pillow. The tier system is now **3,620 lines of pure Python stdlib** - from binary to BMP to GIF with full LZW compression.

## What We Built

### üé® Simple GIF Encoder (320 lines)
- LZW compression from scratch
- 256-color palette quantization
- GIF89a standard compliant
- Test images: 148 bytes to 10.7 KB

### üñºÔ∏è Simple BMP Encoder (280 lines)
- Framebuffer-style pixel writing
- 24-bit RGB uncompressed
- Windows DIB headers
- Test images: 29 KB to 264 KB

## Live Examples

![Red Square](/static/generated/test_red.gif)
![Green Square](/static/generated/test_green.gif)
![Blue Square](/static/generated/test_blue.gif)

![Gradient Test](/static/generated/test_gradient.gif)
![Checkerboard](/static/generated/test_checkerboard.gif)
![Shapes](/static/generated/test_shapes.gif)

## Brand Logos (Generated with Our GIF Encoder)

![CalRiven](/static/generated/calriven_logo.gif) **CalRiven** - Technical precision (Blue circuit)

![TheAuditor](/static/generated/theauditor_logo.gif) **TheAuditor** - Validation (Amber checkmark)

![DeathToData](/static/generated/deathtodata_logo.gif) **DeathToData** - Privacy (Purple shield)

![Soulfra](/static/generated/soulfra_logo.gif) **Soulfra** - Meta-judge (Green balance)

## Technical Breakdown

**Tier 1: Binary** (2,400 lines)
- Bitwise operations, byte manipulation
- Foundation for all encoding

**Tier 2: Text** (300 lines)
- Markdown to HTML converter
- String processing, escaping

**Tier 3: Raster Graphics** (600 lines)
- BMP: Direct pixel framebuffer
- GIF: LZW compression, color quantization
- No external dependencies

**Tier 4: Animation** (320 lines)
- GIF supports multi-frame
- Next: BMP sequence to GIF converter

## Why This Matters

Every image on this platform is now generated by **code we fully understand**. No black boxes. No dependencies. Just binary ‚Üí pixels ‚Üí compression.

The logos above? Generated in ~200ms using our pure stdlib encoder.

[View Full Showcase](/tiers)

---

**Stats**: 3,620 lines | 0 dependencies | 4 brands | Binary ‚Üí Images complete

This is dogfooding. This is infrastructure. This is **Soulfra**.
'''

def main():
    """Create and add the tier system post"""
    print("üìù Creating tier system newsletter post...")

    # Post metadata
    title = "Tier System Complete: Binary ‚Üí Images (3,620 Lines Pure Stdlib)"
    slug = "tier-system-complete-binary-to-images"
    user_id = 1  # Admin user
    published_at = datetime.now()

    # Add post to database
    post_id = add_post(
        user_id=user_id,
        title=title,
        slug=slug,
        content=POST_CONTENT,
        published_at=published_at
    )

    if post_id:
        print(f"‚úÖ Post created successfully!")
        print(f"   ID: {post_id}")
        print(f"   Title: {title}")
        print(f"   Slug: {slug}")
        print(f"   URL: http://localhost:5001/post/{slug}")
        print(f"\nüì∑ Images included:")
        print(f"   - 6 test GIFs (red, green, blue, gradient, checkerboard, shapes)")
        print(f"   - 4 brand logos (calriven, theauditor, deathtodata, soulfra)")
        print(f"\nüåê View at: http://localhost:5001")
    else:
        print(f"‚ùå Error: Slug '{slug}' already exists or database error")
        sys.exit(1)

if __name__ == '__main__':
    main()
