<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Words to Canvas - Knowledge Graph</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #f5f5f5;
        }
        h1 {
            color: #333;
            margin: 0 0 20px 0;
        }
        #canvas {
            background: white;
            border: 1px solid #ddd;
            cursor: grab;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        #canvas:active {
            cursor: grabbing;
        }
        #info {
            margin-top: 20px;
            padding: 15px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .stats {
            display: flex;
            gap: 20px;
            margin-bottom: 10px;
        }
        .stat {
            padding: 10px;
            background: #f0f0f0;
            border-radius: 4px;
        }
        .stat strong {
            color: #2196F3;
        }
    </style>
</head>
<body>
    <h1>ðŸŽ¨ Words to Canvas - Knowledge Graph</h1>

    <canvas id="canvas" width="1200" height="900"></canvas>

    <div id="info">
        <div class="stats">
            <div class="stat"><strong>5</strong> nodes</div>
            <div class="stat"><strong>4</strong> edges</div>
            <div class="stat"><strong id="selected-node">Click a node to see details</strong></div>
        </div>
        <div id="details"></div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const selectedNode = document.getElementById('selected-node');
        const details = document.getElementById('details');

        // Data
        const nodes = [{"id": "router_soulfra", "label": "soulfra.com\n(Main Router)", "type": "router", "x": 505.7449503972766, "y": 450.0001460493325, "definition": "", "usage_count": 0}, {"id": "device_calriven.com", "label": "PC 1\ncalriven.com", "type": "device", "x": 39.854545939825925, "y": 30, "definition": "", "usage_count": 0}, {"id": "device_deathtodata.com", "label": "PC 2\ndeathtodata.com", "type": "device", "x": 39.85420300123101, "y": 870, "definition": "", "usage_count": 0}, {"id": "device_howtocookathome.com", "label": "PC 3\nhowtocookathome.com", "type": "device", "x": 959.5325837136144, "y": 870, "definition": "", "usage_count": 0}, {"id": "device_hollowtown.com", "label": "Server 1\nhollowtown.com", "type": "device", "x": 959.5322332303044, "y": 30, "definition": "", "usage_count": 0}];
        const edges = [{"source": "device_calriven.com", "target": "router_soulfra", "type": "auth_flow"}, {"source": "device_deathtodata.com", "target": "router_soulfra", "type": "auth_flow"}, {"source": "device_howtocookathome.com", "target": "router_soulfra", "type": "auth_flow"}, {"source": "device_hollowtown.com", "target": "router_soulfra", "type": "auth_flow"}];

        // Colors
        const colors = {
            base: '#4CAF50',
            expanded: '#2196F3',
            edge: '#999'
        };

        // Draw graph
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw edges
            ctx.strokeStyle = colors.edge;
            ctx.lineWidth = 1;
            ctx.globalAlpha = 0.6;

            edges.forEach(edge => {
                const source = nodes.find(n => n.id === edge.source);
                const target = nodes.find(n => n.id === edge.target);

                if (source && target) {
                    ctx.beginPath();
                    ctx.moveTo(source.x, source.y);
                    ctx.lineTo(target.x, target.y);
                    ctx.stroke();
                }
            });

            ctx.globalAlpha = 1.0;

            // Draw nodes
            nodes.forEach(node => {
                const radius = node.type === 'base' ? 8 : 6;
                const color = colors[node.type] || colors.base;

                // Circle
                ctx.fillStyle = color;
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.arc(node.x, node.y, radius, 0, 2 * Math.PI);
                ctx.fill();
                ctx.stroke();

                // Label
                ctx.fillStyle = '#333';
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(node.label, node.x, node.y + 20);
            });
        }

        // Handle clicks
        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            // Find clicked node
            const clickedNode = nodes.find(node => {
                const dx = x - node.x;
                const dy = y - node.y;
                const distance = Math.sqrt(dx*dx + dy*dy);
                return distance < 15;
            });

            if (clickedNode) {
                selectedNode.textContent = clickedNode.label;
                details.innerHTML = `
                    <h3>${clickedNode.label}</h3>
                    <p><strong>Type:</strong> ${clickedNode.type}</p>
                    ${clickedNode.definition ? `<p><strong>Definition:</strong> ${clickedNode.definition}</p>` : ''}
                    ${clickedNode.usage_count > 0 ? `<p><strong>Usage count:</strong> ${clickedNode.usage_count}</p>` : ''}
                `;
            }
        });

        // Initial draw
        draw();

        console.log('ðŸ“Š Knowledge graph loaded');
        console.log('Nodes:', nodes.length);
        console.log('Edges:', edges.length);
    </script>
</body>
</html>