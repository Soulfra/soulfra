<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude API Integration - Documentation</title>
    <link rel="stylesheet" href="../static/style.css">
    <style>
        .doc-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            line-height: 1.6;
        }
        .doc-content pre {
            background: #f5f5f5;
            padding: 1rem;
            border-radius: 4px;
            overflow-x: auto;
        }
        .doc-content code {
            background: #f0f0f0;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-family: monospace;
        }
        .doc-content pre code {
            background: transparent;
            padding: 0;
        }
        .doc-content table {
            border-collapse: collapse;
            width: 100%;
            margin: 1rem 0;
        }
        .doc-content th, .doc-content td {
            border: 1px solid #ddd;
            padding: 0.5rem;
            text-align: left;
        }
        .doc-content th {
            background: #f5f5f5;
        }
    </style>
</head>
<body>
    <header>
        <h1><a href="../index.html">Soulfra Platform</a></h1>
        <nav>
            <a href="index.html">Docs Home</a> |
            <a href="../index.html">Posts</a>
        </nav>
    </header>

    <main class="doc-content">
        <h1 id="claude-api-integration">Claude API Integration</h1>

<p><strong>How to force Claude to auto-generate Soulfra newsletter content</strong></p>

<hr />

<h2 id="setup">Setup</h2>

<div class="codehilite">
<pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>anthropic
</code></pre>
</div>

<p>Create <code>config_secrets.py</code>:</p>

<div class="codehilite">
<pre><span></span><code><span class="n">CLAUDE_API_KEY</span> <span class="o">=</span> <span class="s2">&quot;sk-ant-api03-...&quot;</span>  <span class="c1"># From console.anthropic.com</span>
</code></pre>
</div>

<hr />

<h2 id="basic-usage">Basic Usage</h2>

<div class="codehilite">
<pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">anthropic</span><span class="w"> </span><span class="kn">import</span> <span class="n">Anthropic</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Anthropic</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="s2">&quot;YOUR_API_KEY&quot;</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">generate_post_with_claude</span><span class="p">(</span><span class="n">brand_slug</span><span class="p">,</span> <span class="n">topic</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate a blog post using Claude&quot;&quot;&quot;</span>

    <span class="c1"># Get brand personality from database</span>
    <span class="n">brand_personality</span> <span class="o">=</span> <span class="n">get_brand_personality</span><span class="p">(</span><span class="n">brand_slug</span><span class="p">)</span>

    <span class="n">prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    You are writing for the </span><span class="si">{</span><span class="n">brand_slug</span><span class="si">}</span><span class="s2"> brand.</span>
<span class="s2">    Brand personality: </span><span class="si">{</span><span class="n">brand_personality</span><span class="si">}</span>

<span class="s2">    Topic: </span><span class="si">{</span><span class="n">topic</span><span class="si">}</span>

<span class="s2">    Write a 500-word blog post in the brand&#39;s voice.</span>
<span class="s2">    Format as markdown with ## headers.</span>
<span class="s2">    &quot;&quot;&quot;</span>

    <span class="n">message</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-sonnet-4&quot;</span><span class="p">,</span>
        <span class="n">max_tokens</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span>
        <span class="n">messages</span><span class="o">=</span><span class="p">[{</span>
            <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span>
            <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">prompt</span>
        <span class="p">}]</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>

<span class="c1"># Usage</span>
<span class="n">post</span> <span class="o">=</span> <span class="n">generate_post_with_claude</span><span class="p">(</span><span class="s2">&quot;deathtodata&quot;</span><span class="p">,</span> <span class="s2">&quot;privacy vs surveillance&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">post</span><span class="p">)</span>
</code></pre>
</div>

<hr />

<h2 id="auto-post-to-database">Auto-Post to Database</h2>

<div class="codehilite">
<pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">sqlite3</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>

<span class="k">def</span><span class="w"> </span><span class="nf">save_claude_post</span><span class="p">(</span><span class="n">brand_slug</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">content</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Save Claude-generated post to database&quot;&quot;&quot;</span>

    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;soulfra.db&#39;</span><span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1"># Get brand ID</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT id FROM brands WHERE slug = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">brand_slug</span><span class="p">,))</span>
    <span class="n">brand_id</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># Create post</span>
    <span class="n">slug</span> <span class="o">=</span> <span class="n">title</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        INSERT INTO posts (user_id, title, slug, content, published_at, brand_id)</span>
<span class="s2">        VALUES (?, ?, ?, ?, ?, ?)</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">,</span> <span class="p">(</span>
        <span class="mi">14</span><span class="p">,</span>  <span class="c1"># Claude AI user ID</span>
        <span class="n">title</span><span class="p">,</span>
        <span class="n">slug</span><span class="p">,</span>
        <span class="n">content</span><span class="p">,</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
        <span class="n">brand_id</span>
    <span class="p">))</span>

    <span class="n">post_id</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">lastrowid</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">post_id</span>

<span class="c1"># Full flow</span>
<span class="n">post_content</span> <span class="o">=</span> <span class="n">generate_post_with_claude</span><span class="p">(</span><span class="s2">&quot;deathtodata&quot;</span><span class="p">,</span> <span class="s2">&quot;data privacy&quot;</span><span class="p">)</span>
<span class="n">post_id</span> <span class="o">=</span> <span class="n">save_claude_post</span><span class="p">(</span><span class="s2">&quot;deathtodata&quot;</span><span class="p">,</span> <span class="s2">&quot;Why Privacy Matters&quot;</span><span class="p">,</span> <span class="n">post_content</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úì Post #</span><span class="si">{</span><span class="n">post_id</span><span class="si">}</span><span class="s2"> created by Claude&quot;</span><span class="p">)</span>
</code></pre>
</div>

<hr />

<h2 id="terminal-command">Terminal Command</h2>

<div class="codehilite">
<pre><span></span><code>python3<span class="w"> </span>force_claude_write.py<span class="w"> </span>--brand<span class="w"> </span>deathtodata<span class="w"> </span>--topic<span class="w"> </span><span class="s2">&quot;privacy&quot;</span>
<span class="c1"># ‚úì Post #26 created: &quot;Why Privacy Matters in 2025&quot;</span>
</code></pre>
</div>

<hr />

<h2 id="daily-auto-generation">Daily Auto-Generation</h2>

<div class="codehilite">
<pre><span></span><code><span class="c1"># cron_claude_daily.py</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">schedule</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">config_secrets</span><span class="w"> </span><span class="kn">import</span> <span class="n">CLAUDE_API_KEY</span>

<span class="n">topics</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;deathtodata&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;privacy&quot;</span><span class="p">,</span> <span class="s2">&quot;encryption&quot;</span><span class="p">,</span> <span class="s2">&quot;surveillance&quot;</span><span class="p">,</span> <span class="s2">&quot;data rights&quot;</span><span class="p">],</span>
    <span class="s2">&quot;calriven&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;AI&quot;</span><span class="p">,</span> <span class="s2">&quot;neural networks&quot;</span><span class="p">,</span> <span class="s2">&quot;architecture&quot;</span><span class="p">,</span> <span class="s2">&quot;Python&quot;</span><span class="p">],</span>
    <span class="s2">&quot;soulfra&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;platforms&quot;</span><span class="p">,</span> <span class="s2">&quot;self-hosting&quot;</span><span class="p">,</span> <span class="s2">&quot;OSS&quot;</span><span class="p">,</span> <span class="s2">&quot;ownership&quot;</span><span class="p">]</span>
<span class="p">}</span>

<span class="k">def</span><span class="w"> </span><span class="nf">daily_post</span><span class="p">(</span><span class="n">brand_slug</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate daily post for a brand&quot;&quot;&quot;</span>
    <span class="n">topic</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">topics</span><span class="p">[</span><span class="n">brand_slug</span><span class="p">])</span>
    <span class="n">post</span> <span class="o">=</span> <span class="n">generate_post_with_claude</span><span class="p">(</span><span class="n">brand_slug</span><span class="p">,</span> <span class="n">topic</span><span class="p">)</span>
    <span class="n">save_claude_post</span><span class="p">(</span><span class="n">brand_slug</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Daily </span><span class="si">{</span><span class="n">brand_slug</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">post</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úì Generated daily post for </span><span class="si">{</span><span class="n">brand_slug</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Run every day at 9am</span>
<span class="n">schedule</span><span class="o">.</span><span class="n">every</span><span class="p">()</span><span class="o">.</span><span class="n">day</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="s2">&quot;09:00&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="n">daily_post</span><span class="p">,</span> <span class="s2">&quot;deathtodata&quot;</span><span class="p">)</span>
<span class="n">schedule</span><span class="o">.</span><span class="n">every</span><span class="p">()</span><span class="o">.</span><span class="n">day</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="s2">&quot;10:00&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="n">daily_post</span><span class="p">,</span> <span class="s2">&quot;calriven&quot;</span><span class="p">)</span>
<span class="n">schedule</span><span class="o">.</span><span class="n">every</span><span class="p">()</span><span class="o">.</span><span class="n">day</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="s2">&quot;11:00&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="n">daily_post</span><span class="p">,</span> <span class="s2">&quot;soulfra&quot;</span><span class="p">)</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">schedule</span><span class="o">.</span><span class="n">run_pending</span><span class="p">()</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3600</span><span class="p">)</span>
</code></pre>
</div>

<p><strong>Start daemon:</strong></p>

<div class="codehilite">
<pre><span></span><code>nohup<span class="w"> </span>python3<span class="w"> </span>cron_claude_daily.py<span class="w"> </span><span class="p">&amp;</span>
<span class="c1"># Claude now generates 3 posts/day automatically</span>
</code></pre>
</div>

<hr />

<h2 id="with-newsletter-integration">With Newsletter Integration</h2>

<div class="codehilite">
<pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">claude_post_and_send</span><span class="p">(</span><span class="n">brand_slug</span><span class="p">,</span> <span class="n">topic</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate post + send newsletter&quot;&quot;&quot;</span>

    <span class="c1"># 1. Generate with Claude</span>
    <span class="n">post</span> <span class="o">=</span> <span class="n">generate_post_with_claude</span><span class="p">(</span><span class="n">brand_slug</span><span class="p">,</span> <span class="n">topic</span><span class="p">)</span>

    <span class="c1"># 2. Save to database</span>
    <span class="n">post_id</span> <span class="o">=</span> <span class="n">save_claude_post</span><span class="p">(</span><span class="n">brand_slug</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">topic</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">post</span><span class="p">)</span>

    <span class="c1"># 3. Classify with neural network (optional)</span>
    <span class="n">classify_post</span><span class="p">(</span><span class="n">post_id</span><span class="p">)</span>

    <span class="c1"># 4. Send newsletter</span>
    <span class="n">send_newsletter</span><span class="p">(</span><span class="n">brand_slug</span><span class="p">,</span> <span class="n">post_id</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">post_id</span>

<span class="c1"># One function = complete automation</span>
<span class="n">post_id</span> <span class="o">=</span> <span class="n">claude_post_and_send</span><span class="p">(</span><span class="s2">&quot;deathtodata&quot;</span><span class="p">,</span> <span class="s2">&quot;privacy&quot;</span><span class="p">)</span>
</code></pre>
</div>

<hr />

<h2 id="conversation-to-post">Conversation-to-Post</h2>

<div class="codehilite">
<pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">claude_conversation_to_post</span><span class="p">(</span><span class="n">session_id</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Turn user conversation into blog post&quot;&quot;&quot;</span>

    <span class="c1"># Get conversation from database</span>
    <span class="n">conv</span> <span class="o">=</span> <span class="n">get_conversation</span><span class="p">(</span><span class="n">session_id</span><span class="p">)</span>

    <span class="n">prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    A user had this conversation:</span>

<span class="s2">    </span><span class="si">{</span><span class="n">conv</span><span class="p">[</span><span class="s1">&#39;messages&#39;</span><span class="p">]</span><span class="si">}</span>

<span class="s2">    Turn this into a structured blog post with:</span>
<span class="s2">    - Catchy title</span>
<span class="s2">    - Introduction</span>
<span class="s2">    - Key points</span>
<span class="s2">    - Conclusion</span>

<span class="s2">    Format as markdown.</span>
<span class="s2">    &quot;&quot;&quot;</span>

    <span class="n">message</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;claude-sonnet-4&quot;</span><span class="p">,</span>
        <span class="n">max_tokens</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span>
        <span class="n">messages</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">prompt</span><span class="p">}]</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>

<span class="c1"># Usage (called from /generate post command)</span>
<span class="n">post</span> <span class="o">=</span> <span class="n">claude_conversation_to_post</span><span class="p">(</span><span class="s2">&quot;session_123&quot;</span><span class="p">)</span>
</code></pre>
</div>

<hr />

<h2 id="bulk-generation">Bulk Generation</h2>

<div class="codehilite">
<pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">bulk_generate_posts</span><span class="p">(</span><span class="n">brand_slug</span><span class="p">,</span> <span class="n">topics_list</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate many posts at once&quot;&quot;&quot;</span>

    <span class="k">for</span> <span class="n">topic</span> <span class="ow">in</span> <span class="n">topics_list</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">post</span> <span class="o">=</span> <span class="n">generate_post_with_claude</span><span class="p">(</span><span class="n">brand_slug</span><span class="p">,</span> <span class="n">topic</span><span class="p">)</span>
            <span class="n">post_id</span> <span class="o">=</span> <span class="n">save_claude_post</span><span class="p">(</span><span class="n">brand_slug</span><span class="p">,</span> <span class="n">topic</span><span class="p">,</span> <span class="n">post</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úì Created post #</span><span class="si">{</span><span class="n">post_id</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># Rate limit</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úó Failed </span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Generate 20 posts</span>
<span class="n">topics</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;encryption basics&quot;</span><span class="p">,</span> <span class="s2">&quot;tor browser guide&quot;</span><span class="p">,</span> <span class="s2">&quot;signal setup&quot;</span><span class="p">,</span>
    <span class="s2">&quot;protonmail tutorial&quot;</span><span class="p">,</span> <span class="s2">&quot;vpn comparison&quot;</span><span class="p">,</span> <span class="c1"># ... etc</span>
<span class="p">]</span>
<span class="n">bulk_generate_posts</span><span class="p">(</span><span class="s2">&quot;deathtodata&quot;</span><span class="p">,</span> <span class="n">topics</span><span class="p">)</span>
</code></pre>
</div>

<hr />

<h2 id="api-endpoint">API Endpoint</h2>

<p>Add to <code>app.py</code>:</p>

<div class="codehilite">
<pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/api/claude/generate&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span><span class="w"> </span><span class="nf">api_claude_generate</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;API endpoint for Claude generation&quot;&quot;&quot;</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span>
    <span class="n">brand</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;brand&#39;</span><span class="p">)</span>
    <span class="n">topic</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;topic&#39;</span><span class="p">)</span>

    <span class="n">post</span> <span class="o">=</span> <span class="n">generate_post_with_claude</span><span class="p">(</span><span class="n">brand</span><span class="p">,</span> <span class="n">topic</span><span class="p">)</span>
    <span class="n">post_id</span> <span class="o">=</span> <span class="n">save_claude_post</span><span class="p">(</span><span class="n">brand</span><span class="p">,</span> <span class="n">topic</span><span class="p">,</span> <span class="n">post</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
        <span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s1">&#39;post_id&#39;</span><span class="p">:</span> <span class="n">post_id</span><span class="p">,</span>
        <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;/post/</span><span class="si">{</span><span class="n">post_id</span><span class="si">}</span><span class="s1">&#39;</span>
    <span class="p">})</span>

<span class="c1"># Call from anywhere</span>
<span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">5001</span><span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">claude</span><span class="o">/</span><span class="n">generate</span> \
  <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> \
  <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;brand&quot;: &quot;deathtodata&quot;, &quot;topic&quot;: &quot;privacy&quot;}&#39;</span>
</code></pre>
</div>

<hr />

<h2 id="cost-estimation">Cost Estimation</h2>

<p><strong>Claude Sonnet 4 pricing:</strong>
- Input: $3 / million tokens
- Output: $15 / million tokens</p>

<p><strong>Average blog post:</strong>
- Input: ~500 tokens (prompt)
- Output: ~1000 tokens (post)
- Cost: ~$0.02 per post</p>

<p><strong>Monthly:</strong>
- 100 posts √ó $0.02 = <strong>$2/month</strong></p>

<p><strong>Way cheaper than hiring writers.</strong></p>

<hr />

<h2 id="next-steps">Next Steps</h2>

<ol>
<li>Get API key from console.anthropic.com</li>
<li>Add to config_secrets.py</li>
<li>Run <code>force_claude_write.py</code></li>
<li>Set up daily cron job</li>
<li>Watch automated content flow</li>
</ol>

<p><strong>Your newsletter runs itself.</strong> ü§ñ</p>

    </main>

    <footer>
        <p><a href="index.html">‚Üê Back to documentation</a></p>
    </footer>
</body>
</html>
