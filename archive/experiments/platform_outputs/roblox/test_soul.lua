-- Soul ModuleScript for soul_tester
-- Auto-generated by Soulfra Platform Connector
-- DO NOT EDIT MANUALLY - Sync via /api/soul/sync

local Soul = {}

-- IDENTITY (Immutable)
Soul.Identity = {
    UserID = 20,
    Username = "soul_tester",
    CreatedAt = "2025-12-25 18:21:45"
}

-- ESSENCE (Evolves Slowly)
Soul.Essence = {
    Values = {"community"},
    Interests = {"game", "player", "your", "data", "what"},
    Expertise = {"player", "game", "your"}
}

-- EXPRESSION (Changes Frequently)
Soul.Expression = {
    Level = 1,
    Experience = 500,
    PostCount = 5,
    Karma = 100,
    LastActive = "Never"
}

-- APPEARANCE (Deterministic from Username)
Soul.Appearance = {
    ColorScheme = {
        Primary = Color3.fromRGB(37, 243, 144),
        Secondary = Color3.fromRGB(87, 37, 194)
    },
    AvatarURL = "http://localhost:5000/static/avatars/generated/soul_tester.png"
}

-- CHAT RULES (Terms of Service Enforcement)
Soul.ChatRules = {
    Enabled = true,
    BlockedWords = {"password", "credit card", "ssn", "hack", "exploit"},
    RateLimitSeconds = 2,
    MaxMessageLength = 500
}

-- API SYNC
Soul.Sync = {
    Endpoint = "http://localhost:5000/api/soul/sync",
    Interval = 60, -- seconds
    LastSync = 0
}

-- METHODS
function Soul:GetDisplayName()
    return self.Identity.Username
end

function Soul:GetLevel()
    return self.Expression.Level
end

function Soul:CheckChatMessage(message)
    if not self.ChatRules.Enabled then
        return true, ""
    end

    -- Check length
    if #message > self.ChatRules.MaxMessageLength then
        return false, "Message too long"
    end

    -- Check blocked words
    local lowerMessage = string.lower(message)
    for _, word in ipairs(self.ChatRules.BlockedWords) do
        if string.find(lowerMessage, string.lower(word)) then
            return false, "Message contains blocked content"
        end
    end

    return true, ""
end

function Soul:SyncWithServer()
    -- TODO: Implement HTTP request to sync endpoint
    self.Sync.LastSync = tick()
    print("Synced Soul for " .. self.Identity.Username)
end

return Soul
